分布式事务
分布式事务用于在分布式系统中保证不同节点之间的数据一致性

XA分布式事务协议
两阶段提交（2PC）和三阶段提交（3PC）
事务协调者和事务参与者
2PC
为事务协调者的节点会首先向所有的参与者节点发送Prepare请求
在接到Prepare请求之后，每一个参与者节点会各自执行与事务有关的数据更新，但不提交，返回“完成”
当事务协调者接到了所有参与者的返回消息，整个分布式事务将会进入第二阶段。
在XA分布式事务的第二阶段，如果事务协调节点在之前所收到都是正向返回，那么它将会向所有事务参与者发出Commit请求。
接到Commit请求之后，事务参与者节点会各自进行本地的事务提交，并释放锁资源。当本地事务完成提交后，将会向事务协调者返回“完成”消息。
当事务协调者接收到所有事务参与者的“完成”反馈，整个分布式事务完成。



XA三阶段提交在两阶段提交的基础上增加了CanCommit阶段，并且引入了超时机制。一旦事物参与者迟迟没有接到协调者的commit请求，会自动进行本地commit。这样有效解决了协调者单点故障的问题。但是性能问题和不一致的问题仍然没有根本解决。



cap